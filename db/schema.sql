-- Création des tables pour le bot de trading Kraken\n\n-- Table pour les trades\nCREATE TABLE IF NOT EXISTS trades (\n    id SERIAL PRIMARY KEY,\n    pair VARCHAR(20) NOT NULL,\n    type VARCHAR(10) NOT NULL, -- buy/sell\n    size DECIMAL(20,10) NOT NULL,\n    price DECIMAL(20,10) NOT NULL,\n    timestamp TIMESTAMP NOT NULL,\n    status VARCHAR(20) NOT NULL, -- open/closed\n    profit_loss DECIMAL(20,10),\n    fee DECIMAL(20,10),\n    strategy VARCHAR(50)\n);\n\n-- Table pour les positions\nCREATE TABLE IF NOT EXISTS positions (\n    id SERIAL PRIMARY KEY,\n    trade_id INTEGER REFERENCES trades(id),\n    pair VARCHAR(20) NOT NULL,\n    type VARCHAR(10) NOT NULL, -- long/short\n    size DECIMAL(20,10) NOT NULL,\n    entry_price DECIMAL(20,10) NOT NULL,\n    exit_price DECIMAL(20,10),\n    entry_time TIMESTAMP NOT NULL,\n    exit_time TIMESTAMP,\n    status VARCHAR(20) NOT NULL, -- open/closed\n    pnl DECIMAL(20,10)\n);\n\n-- Table pour les signaux de trading\nCREATE TABLE IF NOT EXISTS signals (\n    id SERIAL PRIMARY KEY,\n    pair VARCHAR(20) NOT NULL,\n    type VARCHAR(10) NOT NULL, -- buy/sell\n    price DECIMAL(20,10) NOT NULL,\n    timestamp TIMESTAMP NOT NULL,\n    confidence DECIMAL(5,4) NOT NULL,\n    strategy VARCHAR(50) NOT NULL\n);\n\n-- Table pour les indicateurs techniques\nCREATE TABLE IF NOT EXISTS indicators (\n    id SERIAL PRIMARY KEY,\n    pair VARCHAR(20) NOT NULL,\n    timestamp TIMESTAMP NOT NULL,\n    rsi DECIMAL(5,2),\n    macd DECIMAL(20,10),\n    signal_line DECIMAL(20,10),\n    bollinger_upper DECIMAL(20,10),\n    bollinger_middle DECIMAL(20,10),\n    bollinger_lower DECIMAL(20,10),\n    atr DECIMAL(20,10),\n    vwap DECIMAL(20,10)\n);\n\n-- Index pour optimiser les requêtes\nCREATE INDEX IF NOT EXISTS idx_trades_pair ON trades(pair);\nCREATE INDEX IF NOT EXISTS idx_trades_timestamp ON trades(timestamp);\nCREATE INDEX IF NOT EXISTS idx_positions_pair ON positions(pair);\nCREATE INDEX IF NOT EXISTS idx_positions_status ON positions(status);\nCREATE INDEX IF NOT EXISTS idx_signals_pair ON signals(pair);\nCREATE INDEX IF NOT EXISTS idx_signals_timestamp ON signals(timestamp);\nCREATE INDEX IF NOT EXISTS idx_indicators_pair ON indicators(pair);\nCREATE INDEX IF NOT EXISTS idx_indicators_timestamp ON indicators(timestamp);
